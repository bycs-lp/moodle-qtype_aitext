define("qtype_aitext/getSpellcheck",["exports","qtype_aitext/diff","core_form/modalform","core/str"],(function(_exports,Diff,_modalform,_str){var obj;function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.showModalForm=_exports.renderDiff=_exports.init=void 0,Diff=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}
/**
   * Generates the spellcheck diff view.
   *
   * @module     qtype_aitext/getSpellcheck
   * @copyright  2024, ISB Bayern
   * @author     Dr. Peter Mayer
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */(Diff),_modalform=(obj=_modalform)&&obj.__esModule?obj:{default:obj};_exports.init=()=>{renderDiff(),document.getElementById("aitext_spellcheckedit")&&document.getElementById("aitext_spellcheckedit").addEventListener("click",showModalForm)};const renderDiff=()=>{var studentanswer=document.getElementById("aitext_readonly_area").innerHTML,spellcheck=document.getElementById("aitext_readonly_area").dataset.spellcheck,span=null,diff=Diff.diffChars(studentanswer,spellcheck),fragment=document.createElement("div");let fullspellcheck="";diff.forEach((function(part){var cls=part.added?"qtype_aitext_spellcheck_new":part.removed?"qtype_aitext_spellcheck_wrong":"";part.added||part.removed?((span=document.createElement("span")).classList=cls,span.appendChild(document.createTextNode(part.value)),fullspellcheck+=span.outerHTML):fullspellcheck+=part.value})),fragment.innerHTML=fullspellcheck,document.getElementById("aitext_readonly_area").replaceChildren(fragment)};_exports.renderDiff=renderDiff;const showModalForm=()=>{const attemptstepid=document.getElementById("aitext_readonly_area").dataset.spellcheckattemptstepid,answerstepid=document.getElementById("aitext_readonly_area").dataset.spellcheckattemptstepanswerid,queryString=window.location.search,urlParams=new URLSearchParams(queryString),modalForm=new _modalform.default({formClass:"qtype_aitext\\form\\edit_spellchek",args:{attemptstepid:attemptstepid,answerstepid:answerstepid,cmid:urlParams.get("cmid")},modalConfig:{title:(0,_str.get_string)("spellcheckedit","qtype_aitext")}});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,reloadpage),modalForm.show()};_exports.showModalForm=showModalForm;const reloadpage=()=>{location.reload()}}));

//# sourceMappingURL=getSpellcheck.min.js.map